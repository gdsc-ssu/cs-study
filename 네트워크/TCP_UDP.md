# 🙌 TCP와 UDP

## 🐸 TCP와 UDP란?

- [OSI 7계층](https://github.com/gdsc-ssu/cs-study/blob/main/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/OSI%207%EA%B3%84%EC%B8%B5.md)의 `Transport Layer`에서 데이터를 보내기 위해 사용하는 **프로토콜**.
  > 통신 양단간 신뢰성있는 통신을 보장하는 `통신서비스`를 제공하는 계층으로 , 데이터 전달을 담당.

## 🐸 TCP(Transmission Control Protocol)

: 데이터가 순서대로 송수신 되는 것을 보장하는 **신뢰성 프로토콜**.

- 일반적으로 `IP`와 함께 사용하기 때문에, 보통 TCP/IP라고 한다.
  - IP는 데이터를 배달하는 역할
    - `Network Layer`의 IP Address만으로는 신뢰성 있는 통신이 불가능하다.
  - TCP는 `패킷`을 추적 및 관리하는 역할
    > 효율적인 **라우팅**을 위해 전송할 데이터를 여러 조각으로 나누는데, 이 조각을 패킷이라고 한다.
- `연결지향형` 서비스.
  - 데이터를 전송하기 전에, **데이터 전송을 위한 연결**을 생성
  - 데이터가 네트워크를 통해 전달되는 과정에서 일어날 수 있는 **손실을 교정**

### 🐾 TCP의 역할

- **TCP 3 Way Handshake**
  - `connection`을 생성하여 신뢰성 있는 송수신을 보장한다.<br/>
    ![image](https://images.velog.io/images/park9910/post/619a7775-ad87-44a3-b56a-322a964626f9/image.png)<br/>
    - `SYN`<br/>
      : 어플리케이션이 서버에 통신을 위한 연결을 요청.
    - `SYN-ACK`<br/>
      : 서버가 어플리케이션에 자신이 활성 상태임을 알리고, 어플리케이션에서도 포트를 열어 연결을 활성화하라는 요청 메시지를 전송.
    - `ACK`<br/>
      : 어플리케이션이 서버의 요청 메시지를 수락하여 연결이 수립.
- **전송 제어**
  - 전송을 제어해주는 프로토콜에 대한 정보를 패킷에 추가한다.
  - `Port 정보`
    - 패킷이 어떤 프로세스에 전달되어야 하는지에 대한 정보
      > Port란, IP Address를 통해 패킷이 전달되면, 해당 패킷을 어떤 프로세스가 처리해야하는지 명시해놓은 것.
  - `순서 정보`
    - 패킷이 여러개인 경우, 각 패킷이 어떤 순서로 처리되어야 하는지에 대한 정보

### 🐾 TCP의 특징

- 연결 지향 방식
- `3-way handshaking`과정을 통해 연결을 설정하고 `4-way handshaking`을 통해 해제한다.<br/>
  ![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F99C5C63359FEB5DC06)
- **흐름제어** 및 **혼잡제어**
- 높은 신뢰성 보장
- UDP보다 속도가 느리다.
- `Full-Duplex(전이중)`
  - 양방향으로 송수신이 가능한 쌍뱡향 통신방식
- `Point to Point(점대점)`
  - 통신을 하는 두 객체간 1:1 연결이 되어있는 방식
- 서버소켓은 연결만을 담당
- 전송할 수 있는 데이터의 크기에 제한이 없다.
- 패킷에 대한 응답을 해야하기 때문에 성능이 낮다.
- 데이터 손실시 재전송 요청을 하기에 실시간 서비스에 적합하지 않다.

## 🐸 UDP(User Datagram Protocol)

: 데이터를 데이터그램 단위로 처리하는, **비신뢰성 프로토콜**.

> 데이터그램이란, 독립적인 관계를 지니는 패킷을 의미한다.

- 연결을 위해 할당되는 논리적인 경로가 없다.
  1. 각각의 패킷이 다른 경로로 전송한다
  2. 각각의 패킷이 독립적인 관계를 갖게 된다
  3. 데이터를 다른 경로로, 독립적으로 처리하게 된다.
- `비연결지향형` 서비스.
  - 수신자가 데이터를 받았는지 검증하지 않고, **데이터를 보내기만한다.**
  - 발생되는 에러, 재전송, 순서교차에 대해서는 Application에서 처리해야한다.
  - **하지만 속도가 빠르다**

### 🐾 UDP의 역할

- 연결이 없기 때문에 TCP에 비해 훨씬 간단한 프로토콜이다.<br/>
- ![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F9934293359FEB5EE38)
  - 위 그림과 같이, 정말 데이터를 보내는 역할만을 수행한다.
  - 통신 과정에서 데이터의 손실이 발생할 수 있다.
    - 일부 손실이 발생하더라도 빠른 전송이 중요한 실시간 서비스에 많이 사용된다.

### 🐾 UDP의 특징

- 비연결형 서비스로, 데이터그램 방식을 제공한다.
  - `65535 byte`가 최대이며, 초과시 잘려서 전송된다.
- 정보를 주고 받을 때, TCP와 같이 정보를 보내거나 받을 수 있다는 신호 절차가 없다.
- UDP 헤더의 `체크섬`을 통해 최소한의 오류만 검출한다.
- 신뢰성이 낮다.
- TCP보다 속도가 빠르다.
- 연결이 없기 때문에 `서버소켓`과 `클라이언트소켓`의 차이가 없다.
- 소켓 대신 IP 기반으로 데이터를 전송한다.
- `1:1` `1:N` `N:M` 모두 가능하다.
- **흐름제어가** 존재하지 않기에, 오류 여부를 알 수 없다.
- 신뢰성보다 **성능이 중요한 경우**에 사용된다.
  > 흐름제어란, 송수신시 데이터 처리 속도를 조절하여 수신자의 `버퍼 오버플로우`를 방지하는 것이다.<br/>
  > 혼잡제어란, 네트워크 내의 패킷 수가 넘치지 않도록 방지하여 `혼잡 붕괴 현상`이 일어나는 것을 막는 것이다.

## 🐸 TCP와 UDP의 차이점

![image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F232D0545586CAD7410)<br/>
|프로토콜 종류|TCP|UDP|
|------|---|---|
|연결 방식|연결형 서비스|비 연결형 서비스|
|패킷 교환 방식|가상 회선 방식|데이터그램 방식|
|전송 순서|전송 순서 보장|전송 순서가 바뀔 수 있음|
|수신 여부 확인|수신 여부를 확인함|수신 여부를 확인하지 않음|
|통신 방식|1:1|1:1 1:N N:M|
|신뢰성|높음|낮음|
|속도|느림|빠름|

## 🔍 참고자료

- [[Network] TCP와 UDP](https://nukw0n-dev.tistory.com/10)
- [[TCP/UDP] TCP와 UDP의 특징과 차이](https://mangkyu.tistory.com/15)
- [TCP와 UDP 란?](https://itstudyblog.tistory.com/295)
